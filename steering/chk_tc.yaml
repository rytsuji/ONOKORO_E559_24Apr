# file : chk.yaml 
# date : 2022.07.01 by Y.HIJIKATA
# lastest update : 2022.07.01 by Y.HIJIKATA

Anchor:

  - &input data/run@NUM@.bld
  - &histout output/phys/run@NUM@.hist.root
  - &output output/phys/run@NUM@.root

Processor:
  - name: timer
    type: art::TTimerProcessor

  - name: es_rcnp
    type: art::TRCNPEventStore_ts
    parameter:
      OutputTransparency: 1
      InputFiles:
         - *input

  - name: mapper
    type: art::TMappingProcessor
    parameter:
      OutputTransparency: 1
      MapConfig: mapper_tamidaq.conf
      
  - include: tref.yaml
  - include: trig.yaml
  - include: rf.yaml
  - include: tref_chk.yaml

  - name: gate_array_init
    type: art::TGateArrayInitializer
    parameter:
      OutputTransparency: 1

  - name: trigger_gates
    type: art::TTreeFormulaGateProcessor
    parameter:
      Definitions:
        - "gate_coin; trig_coin.fID==0"

  - name: stop_proc
    type: art::TGateStopProcessor
    parameter:
      GateName: "gate_coin"

  - include: pla/pla_gr.yaml
#define GR PID
  - include: gate/gr/gate_gr_5451050.yaml
  - include:
      name: vdc/vdc_gr.yaml
      replace:
        DT2DL: current
  - include: vdc/vdc_gr_track.yaml

#  - name: gate_array_init
#    type: art::TGateArrayInitializer
#    parameter:
#      OutputTransparency: 1
#  - name: vdc_gr_gate
#    type: art::TTreeFormulaGateProcessor
#    parameter:
#      Definitions:
#        - "gate_gdc; @vdc_gr.GetEntriesFast()>0"
# - name: stop_proc
#   type: art::TGateStopProcessor
#   parameter:
#     GateName: "gate_gdc"

##LAS##
  - include: pla/pla_las.yaml  
  - include:
      name: vdc/vdc_las.yaml
      replace:
        DT2DL: current
##define LAS PID##
  - include: gate/las/gate_las_5451026.yaml	

  - include: vdc/vdc_las_track.yaml



##hist##
  - name: hist_pid_gr
    type: art::TTreeProjectionProcessor
    parameter:
      Type: art::TTreeProjection
      FileName: hist/pid/pid_gr.hist.yaml
      OutputFilename: *histout

  - name: hist_pid_las
    type: art::TTreeProjectionProcessor
    parameter:
      Type: art::TTreeProjection
      FileName: hist/pid/pid_las.hist.yaml
      OutputFilename: *histout

  - name: hist_tc
    type: art::TTreeProjectionProcessor
    parameter:
      Type: art::TTreeProjection
      FileName: hist/phys/tc.hist.yaml
      OutputFilename: *histout

  - name: outputtree
    type: art::TOutputTreeProcessor
    parameter:
      FileName: *output
      
