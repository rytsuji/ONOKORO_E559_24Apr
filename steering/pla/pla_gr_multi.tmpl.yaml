# file : pla_gr.tmpl.yaml 
# date : 2022.07.01 by Y.HIJIKATA
# lastest update : 2022.07.01 by Y.HIJIKATA

Processor:

  - name: proc_pla_gr_prm_ch2ns
    type: art::TParameterArrayLoader
    parameter:
      Name:     prm_pla_gr_ch2ns
      Type:     art::TAffineConverter
      FileName: prm/pla/pla_gr_ch2ns.dat

  - name: proc_pla_gr_prm_ch2MeV
    type: art::TParameterArrayLoader
    parameter:
      Name:     prm_pla_gr_ch2MeV
      Type:     art::TAffineConverter
      FileName: prm/pla/pla_gr_ch2MeV.dat

  - name: proc_pla_gr_raw
    type: art::TTimingChargeMultiHitMappingProcessor
    parameter:
      CatID:              @CATID@
      ChargeType:         1
      ChargeTypeID:       1
      TimingTypeID:       0
      OutputCollection:   pla_gr_raw
      OutputTransparency: 0

  - name: proc_pla_gr_calib
    type: art::TTimingChargeCalibrationProcessor
    parameter:
      InputCollection:      pla_gr_raw
      TimingConverterArray: prm_pla_gr_ch2ns
      ChargeConverterArray: prm_pla_gr_ch2MeV
      OutputCollection:     pla_gr_cal
      OutputTransparency:   0




  - name: proc_pla_gr_separater
    type: art::TSeparateOutputProcessor
    parameter:
      InputCollection: pla_gr_cal
      OutputCollections:
        - pla_gr_1l_cal
        - pla_gr_1r_cal
        - pla_gr_2l_cal
        - pla_gr_2r_cal

  - name: proc_pla_gr_1_validator
    type: art::TTimingTrefValidatorLR
    parameter:
      InputCollection1: pla_gr_1l_cal
      InputCollection2: pla_gr_1r_cal      
      InputCollection3: tref_grtrig
      OutputCollection1: pla_gr_1l
      OutputCollection2: pla_gr_1r
      ValidTimeRange:     [@TVALMIN1@,@TVALMAX1@,0]
      ValidTDiffRange:     [@TDIFFMIN1@,@TDIFFMAX1@,0]	
      OutputTransparency: 0

  - name: proc_pla_gr_2_validator
    type: art::TTimingTrefValidatorLR
    parameter:
      InputCollection1: pla_gr_2l_cal
      InputCollection2: pla_gr_2r_cal      
      InputCollection3: tref_grtrig
      OutputCollection1: pla_gr_2l
      OutputCollection2: pla_gr_2r      
      ValidTimeRange:     [@TVALMIN2@,@TVALMAX2@,0]      
      ValidTDiffRange:     [@TDIFFMIN2@,@TDIFFMAX2@,0]	
      OutputTransparency: 0

  - name: proc_pla_gr_1
    type: art::TTwoSidedPlasticCalibrationProcessor
    parameter:
      InputCollection1:   pla_gr_1l
      InputCollection2:   pla_gr_1r
      OutputCollection:   pla_gr_1
#      ValidTimeRange: [-10, 20, 0]  # [FloatVec_t] [min,max,offset] => Tmin = offset + min etc. ignored if min == max
      OutputTransparency: 0

  - name: proc_pla_gr_2
    type: art::TTwoSidedPlasticCalibrationProcessor
    parameter:
      InputCollection1:   pla_gr_2l
      InputCollection2:   pla_gr_2r
      OutputCollection:   pla_gr_2
#      ValidTimeRange: [-100, 100, 0]  # [FloatVec_t] [min,max,offset] => Tmin = offset + min etc. ignored if min == max
      OutputTransparency: 0


      