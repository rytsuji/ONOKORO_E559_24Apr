# file : pla_gr.tmpl.yaml 
# date : 2022.07.01 by Y.HIJIKATA
# lastest update : 2022.07.01 by Y.HIJIKATA

Processor:

  - name: proc_pla_las_prm_ch2ns
    type: art::TParameterArrayLoader
    parameter:
      Name:     prm_pla_las_ch2ns
      Type:     art::TAffineConverter
      FileName: prm/pla/pla_las_ch2ns.dat

  - name: proc_pla_las_prm_ch2MeV
    type: art::TParameterArrayLoader
    parameter:
      Name:     prm_pla_las_ch2MeV
      Type:     art::TAffineConverter
      FileName: prm/pla/pla_las_ch2MeV.dat

  - name: proc_pla_las_raw
    type: art::TTimingChargeMultiHitMappingProcessor
    parameter:
      CatID:              @CATID@
      ChargeType:         1
      ChargeTypeID:       1
      TimingTypeID:       0
      OutputCollection:   pla_las_raw
      OutputTransparency: 0

  - name: proc_pla_las_calib
    type: art::TTimingChargeCalibrationProcessor
    parameter:
      InputCollection:      pla_las_raw
      TimingConverterArray: prm_pla_las_ch2ns
      ChargeConverterArray: prm_pla_las_ch2MeV
      OutputCollection:     pla_las_cal
      OutputTransparency:   0

  - name: proc_pla_las_separater
    type: art::TSeparateOutputProcessor
    parameter:
      InputCollection: pla_las_cal
      OutputCollections:
        - pla_las_1l_cal
        - pla_las_1r_cal
        - pla_las_2l_cal
        - pla_las_2r_cal
        - pla_las_3l_cal
        - pla_las_3r_cal
        - pla_las_4l_cal
        - pla_las_4r_cal
        - pla_las_5l_cal
        - pla_las_5r_cal
        - pla_las_6l_cal
        - pla_las_6r_cal	

#  - name: proc_pla_las_1_validator
#    type: art::TTimingTrefValidatorLR
#    parameter:
#      InputCollection1: pla_las_1l_cal
#      InputCollection2: pla_las_1r_cal      
#      InputCollection3: tref_las
#      OutputCollection1: pla_las_1l
#      OutputCollection2: pla_las_1r
#      ValidTimeRange:     [@TVALMIN1@,@TVALMAX1@,0]
#      ValidTimeRangeL:     [@TVALMIN1L@,@TVALMAX1L@,0]	
#      ValidTimeRangeR:     [@TVALMIN1L@,@TVALMAX1R@,0]
#      OutputTransparency: 0

#  - name: proc_pla_las_2_validator
#    type: art::TTimingTrefValidatorLR
#    parameter:
#      InputCollection1: pla_las_2l_cal
#      InputCollection2: pla_las_2r_cal      
#      InputCollection3: tref_las
#      OutputCollection1: pla_las_2l
#      OutputCollection2: pla_las_2r      
#      ValidTimeRange:     [@TVALMIN2@,@TVALMAX2@,0]
#      ValidTimeRangeL:     [@TVALMIN2L@,@TVALMAX2L@,0]	
#      ValidTimeRangeR:     [@TVALMIN2L@,@TVALMAX2R@,0]
#      OutputTransparency: 0

  - name: proc_pla_las_3_validator
    type: art::TTimingTrefValidatorLR
    parameter:
      InputCollection1: pla_las_3l_cal
      InputCollection2: pla_las_3r_cal      
      InputCollection3: tref_las
      OutputCollection1: pla_las_3l
      OutputCollection2: pla_las_3r      
      ValidTimeRange:     [@TVALMIN3@,@TVALMAX3@,0]
      ValidTimeRangeL:     [@TVALMIN3L@,@TVALMAX3L@,0]	
      ValidTimeRangeR:     [@TVALMIN3L@,@TVALMAX3R@,0]
      OutputTransparency: 0

  - name: proc_pla_las_4_validator
    type: art::TTimingTrefValidatorLR
    parameter:
      InputCollection1: pla_las_4l_cal
      InputCollection2: pla_las_4r_cal      
      InputCollection3: tref_las
      OutputCollection1: pla_las_4l
      OutputCollection2: pla_las_4r      
      ValidTimeRange:     [@TVALMIN4@,@TVALMAX4@,0]
      ValidTimeRangeL:     [@TVALMIN4L@,@TVALMAX4L@,0]	
      ValidTimeRangeR:     [@TVALMIN4L@,@TVALMAX4R@,0]
      OutputTransparency: 0

  - name: proc_pla_las_5_validator
    type: art::TTimingTrefValidatorLR
    parameter:
      InputCollection1: pla_las_5l_cal
      InputCollection2: pla_las_5r_cal      
      InputCollection3: tref_las
      OutputCollection1: pla_las_5l
      OutputCollection2: pla_las_5r      
      ValidTimeRange:     [@TVALMIN5@,@TVALMAX5@,0]
      ValidTimeRangeL:     [@TVALMIN5L@,@TVALMAX5L@,0]	
      ValidTimeRangeR:     [@TVALMIN5L@,@TVALMAX5R@,0]
      OutputTransparency: 0

  - name: proc_pla_las_6_validator
    type: art::TTimingTrefValidatorLR
    parameter:
      InputCollection1: pla_las_6l_cal
      InputCollection2: pla_las_6r_cal      
      InputCollection3: tref_las
      OutputCollection1: pla_las_6l
      OutputCollection2: pla_las_6r      
      ValidTimeRange:     [@TVALMIN6@,@TVALMAX6@,0]
      ValidTimeRangeL:     [@TVALMIN6L@,@TVALMAX6L@,0]	
      ValidTimeRangeR:     [@TVALMIN6L@,@TVALMAX6R@,0]
      OutputTransparency: 0

  - name: proc_pla_las_3
    type: art::TTwoSidedPlasticCalibrationProcessor
    parameter:
      InputCollection1:   pla_las_3l
      InputCollection2:   pla_las_3r
      OutputCollection:   pla_las_3
#      ValidTimeRange: [-10, 20, 0]  # [FloatVec_t] [min,max,offset] => Tmin = offset + min etc. ignored if min == max
      OutputTransparency: 0

  - name: proc_pla_las_4
    type: art::TTwoSidedPlasticCalibrationProcessor
    parameter:
      InputCollection1:   pla_las_4l
      InputCollection2:   pla_las_4r
      OutputCollection:   pla_las_4
#      ValidTimeRange: [-100, 100, 0]  # [FloatVec_t] [min,max,offset] => Tmin = offset + min etc. ignored if min == max
      OutputTransparency: 0

  - name: proc_pla_las_5
    type: art::TTwoSidedPlasticCalibrationProcessor
    parameter:
      InputCollection1:   pla_las_5l
      InputCollection2:   pla_las_5r
      OutputCollection:   pla_las_5
#      ValidTimeRange: [-100, 100, 0]  # [FloatVec_t] [min,max,offset] => Tmin = offset + min etc. ignored if min == max
      OutputTransparency: 0

  - name: proc_pla_las_6
    type: art::TTwoSidedPlasticCalibrationProcessor
    parameter:
      InputCollection1:   pla_las_6l
      InputCollection2:   pla_las_6r
      OutputCollection:   pla_las_6
#      ValidTimeRange: [-100, 100, 0]  # [FloatVec_t] [min,max,offset] => Tmin = offset + min etc. ignored if min == max
      OutputTransparency: 0
      